Looks like I've encountered a bug of IntellijIdea


IntelliJ IDEA 2017.2
Build #IC-172.3317.76, built on July 15, 2017
JRE: 1.8.0_152-release-915-b5 x86_64
JVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o
Mac OS X 10.9.5IntelliJ IDEA 2017.2
               Build #IC-172.3317.76, built on July 15, 2017
               JRE: 1.8.0_152-release-915-b5 x86_64
               JVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o
               Mac OS X 10.9.5




1.  Pull project from

    https://github.com/SqAutoTestTeam/gradleprojectbug

    This project cannot be built with gradle and only demonstrates a problem I've encountered.

2. Open project in IDE IntellijIDEA

3. From IDE call the only test method of ru.idea.possiblebug.TestWithResource class (testResources())
   right click on the body of test method --> popup menu run testResources()

4. Test fails due to not found resources
     (resource with path res/file.txt is not found. search from class class ru.idea.possiblebug.TestWithResource)

5. Go to module settings
   Project panel ->  click on module "module" -> press F4 ->
     setup output path and test output path to directories where normally gradle puts its outputs

     [moduledir]/build/classes/main  and [moduledir]/build/classes/test
     at the moment these pathes are already set


6.  go to menu Intellij IDEA --> preferences --> compile --> resource patterns

    at the moment this setting is
    !?*.java;!?*.form;!?*.class;!?*.groovy;!?*.scala;!?*.flex;!?*.kt;!?*.clj;!?*.aj

    --> left click on the text field with resource pattern value --> press F1

    Shown help page
    https://www.jetbrains.com/help/idea/2017.2/compiler.html?utm_medium=help_link&utm_source=from_product&utm_campaign=IC&utm_content=2017.2

    says that
    ... In this field, specify the regular expression that describes the files that should be recognized as resources and, consequently, copied to the output directory...

    The expression setting itself says that EVERYTHING recognized as resource and therefore copied to the output
    directory but except for the files with extensions java, form, class, groovy, scala, flex, kt, clj and aj
    (which are preprocessed before copying  - compiled in other words)


7.  In case of a simple "Hello world" project - with no gradle support those files that are situated in
    the code base and are not (java, form, class, groovy, scala, flex, kt, clj and aj)
    are copied to output directory - and as result the same test would not fail in a simple project

Described facts makes me think It is a bug.

In addition.
     6 or 7 years ago the setting Intellij IDEA --> preferences --> compile --> resource patterns

     did not permit to copy a file to output by default. I remember that I had to change default value to achieve
     copying resources to output directory. Later in newer versions the default value had been changed.


























   test uses a resource situated "near" the source code


